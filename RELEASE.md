# å‘å¸ƒè„šæœ¬ä½¿ç”¨è¯´æ˜

æœ¬é¡¹ç›®åŒ…å«å¤šç§å‘å¸ƒè„šæœ¬ï¼Œç”¨äºè‡ªåŠ¨åŒ–ç‰ˆæœ¬ç®¡ç†ã€æ„å»ºå’Œå‘å¸ƒæµç¨‹ã€‚

## è„šæœ¬æ–‡ä»¶

- `release.js` - Node.js ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
- `release.ps1` - PowerShell ç‰ˆæœ¬
- `release.bat` - Windows æ‰¹å¤„ç†ç‰ˆæœ¬

## åŠŸèƒ½ç‰¹æ€§

âœ… **è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†** - æ”¯æŒ patchã€minorã€major ç‰ˆæœ¬å‡çº§  
âœ… **æ„å»ºé¡¹ç›®** - ä½¿ç”¨ bun è¿›è¡Œæ¸…ç†å’Œæ„å»º  
âœ… **å‘å¸ƒåˆ° npm** - è‡ªåŠ¨å‘å¸ƒåˆ° npm ä»“åº“  
âœ… **Git é›†æˆ** - è‡ªåŠ¨æäº¤ç‰ˆæœ¬æ›´æ”¹å¹¶åˆ›å»ºæ ‡ç­¾  
âœ… **å®‰å…¨æ£€æŸ¥** - æ£€æŸ¥æœªæäº¤çš„æ›´æ”¹  
âœ… **å½©è‰²è¾“å‡º** - å‹å¥½çš„å‘½ä»¤è¡Œç•Œé¢

## ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ npm scriptsï¼ˆæ¨èï¼‰

```bash
# Patch ç‰ˆæœ¬å‡çº§ (2.0.1 -> 2.0.2)
bun run release:patch

# Minor ç‰ˆæœ¬å‡çº§ (2.0.1 -> 2.1.0)
bun run release:minor

# Major ç‰ˆæœ¬å‡çº§ (2.0.1 -> 3.0.0)
bun run release:major

# é»˜è®¤ patch å‡çº§
bun run release
```

### æ–¹æ³•äºŒï¼šç›´æ¥è¿è¡Œè„šæœ¬

```bash
# Node.js ç‰ˆæœ¬
node release.js patch
node release.js minor
node release.js major

# PowerShell ç‰ˆæœ¬ (Windows)
.\release.ps1 patch
.\release.ps1 minor
.\release.ps1 major

# æ‰¹å¤„ç†ç‰ˆæœ¬ (Windows)
release.bat patch
release.bat minor
release.bat major
```

## ç‰ˆæœ¬ç±»å‹è¯´æ˜

| ç±»å‹      | è¯´æ˜         | ç¤ºä¾‹          |
| --------- | ------------ | ------------- |
| **patch** | ä¿®å¤è¡¥ä¸ç‰ˆæœ¬ | 2.0.1 â†’ 2.0.2 |
| **minor** | æ¬¡è¦åŠŸèƒ½ç‰ˆæœ¬ | 2.0.1 â†’ 2.1.0 |
| **major** | ä¸»è¦ç‰ˆæœ¬æ›´æ–° | 2.0.1 â†’ 3.0.0 |

## å‘å¸ƒæµç¨‹

1. ğŸ” **æ£€æŸ¥ Git çŠ¶æ€** - æ£€æµ‹æœªæäº¤çš„æ›´æ”¹
2. ğŸ”¢ **æ›´æ–°ç‰ˆæœ¬å·** - è‡ªåŠ¨é€’å¢ç‰ˆæœ¬å·å¹¶æ›´æ–° package.json
3. ğŸ§¹ **æ¸…ç†æ„å»º** - åˆ é™¤æ—§çš„ dist ç›®å½•
4. ğŸ”¨ **æ„å»ºé¡¹ç›®** - ä½¿ç”¨ tsup æ„å»ºé¡¹ç›®
5. ğŸ“¤ **å‘å¸ƒåˆ° npm** - å‘å¸ƒåˆ° npm ä»“åº“
6. ğŸ“ **Git æ“ä½œ** - æäº¤æ‰€æœ‰æ›´æ”¹ï¼ˆåŒ…æ‹¬æ„å»ºäº§ç‰©ã€å‘å¸ƒè„šæœ¬ç­‰ï¼‰ã€åˆ›å»ºæ ‡ç­¾ã€æ¨é€åˆ°è¿œç¨‹

## æ³¨æ„äº‹é¡¹

### å‘å¸ƒå‰å‡†å¤‡

- âœ… ç¡®ä¿å·²ç™»å½• npm è´¦æˆ·ï¼š`npm login`
- âœ… ç¡®ä¿å…·æœ‰åŒ…çš„å‘å¸ƒæƒé™
- âœ… æäº¤æ‰€æœ‰ä»£ç æ›´æ”¹ï¼ˆè„šæœ¬ä¼šæ£€æŸ¥ï¼‰
- âœ… ç¡®ä¿é¡¹ç›®èƒ½æ­£å¸¸æ„å»º

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- bunï¼ˆç”¨äºæ„å»ºï¼‰
- Gitï¼ˆç”¨äºç‰ˆæœ¬æ§åˆ¶ï¼‰
- npmï¼ˆç”¨äºå‘å¸ƒï¼‰

### Git æäº¤ç­–ç•¥

å‘å¸ƒè„šæœ¬ä¼šè‡ªåŠ¨æäº¤ä»¥ä¸‹å†…å®¹ï¼š

- âœ… ç‰ˆæœ¬å·æ›´æ–°ï¼ˆ`package.json`ï¼‰
- âœ… æ„å»ºäº§ç‰©ï¼ˆ`dist/` ç›®å½•ï¼‰
- âœ… å‘å¸ƒè„šæœ¬æœ¬èº«ï¼ˆå¦‚æœæ˜¯é¦–æ¬¡æ·»åŠ ï¼‰
- âœ… å…¶ä»–å¾…æäº¤çš„æ›´æ”¹

### æ‰‹åŠ¨å›æ»š

å¦‚æœå‘å¸ƒå‡ºç°é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨å›æ»šï¼š

```bash
# å›æ»šç‰ˆæœ¬å·
git reset --hard HEAD~1

# åˆ é™¤æ ‡ç­¾
git tag -d vç‰ˆæœ¬å·
git push origin :refs/tags/vç‰ˆæœ¬å·

# å–æ¶ˆå‘å¸ƒ (24å°æ—¶å†…)
npm unpublish tauri-mw-store@ç‰ˆæœ¬å·
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **npm å‘å¸ƒå¤±è´¥**

   - æ£€æŸ¥æ˜¯å¦å·²ç™»å½•ï¼š`npm whoami`
   - æ£€æŸ¥åŒ…åæ˜¯å¦å†²çª
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

2. **Git æ“ä½œå¤±è´¥**

   - æ£€æŸ¥æ˜¯å¦æœ‰ Git è¿œç¨‹ä»“åº“
   - æ£€æŸ¥æ˜¯å¦æœ‰æ¨é€æƒé™
   - æ‰‹åŠ¨æ‰§è¡Œ Git å‘½ä»¤

3. **æ„å»ºå¤±è´¥**
   - æ£€æŸ¥ TypeScript ç¼–è¯‘é”™è¯¯
   - ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²å®‰è£…ï¼š`bun install`

### è°ƒè¯•æ¨¡å¼

å¦‚éœ€æŸ¥çœ‹è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œè„šæœ¬æŸ¥çœ‹è¾“å‡ºä¿¡æ¯ã€‚

## è‡ªå®šä¹‰é…ç½®

å¯ä»¥ä¿®æ”¹ `package.json` ä¸­çš„ scripts éƒ¨åˆ†æ¥è°ƒæ•´å‘å¸ƒè¡Œä¸ºï¼š

```json
{
  "scripts": {
    "release": "node release.js",
    "release:patch": "node release.js patch",
    "release:minor": "node release.js minor",
    "release:major": "node release.js major",
    "prepublishOnly": "bun run clean && bun run build"
  }
}
```

`prepublishOnly` é’©å­ç¡®ä¿æ¯æ¬¡å‘å¸ƒå‰éƒ½ä¼šè‡ªåŠ¨æ¸…ç†å’Œæ„å»ºï¼Œæä¾›é¢å¤–çš„å®‰å…¨ä¿éšœã€‚
